#!/bin/sh
usage="Usage: $0 -c <country_code> -s <size_option> -mode <mode> -a <ASIN>"
exterr () { echo "$*" >&2; exit 1; }

# Default arguments.
mode=1
prefix="http://ec2.images-amazon.com/images/"
country="09"
size="SCRM"

# Arguments parsing.
while getopts c:s:m:a: arg
do case ${arg} in
  c) country=`printf "%02d" ${OPTARG}`;;
  s) size=${OPTARG};;
  m) mode=${OPTARG};;
  a) asin=${OPTARG};;
  ?) exterr ${usage};;
esac; done; shift $((${OPTIND}-1))

# Validation
if [ -z "$asin" ]; then
  exterr "ASIN is required."
fi

# Returning
case "${mode}" in
  1) echo "${prefix}P/${asin}.${country}._${size}_.jpg";;
  2) echo "${prefix}P/${asin}._${size}_.jpg";;
  3) echo "${prefix}I/${asin}._${size}_.jpg";;
esac
